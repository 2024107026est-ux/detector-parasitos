<!DOCTYPE html>
<html>
<head>
    <title>Prueba Detallada - Modelo Corregido</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 0 auto; padding: 20px; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        .info { background: #f0f8ff; padding: 10px; border-radius: 5px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>üß™ Prueba Detallada - Modelo Corregido</h1>
    <div id="log"></div>
    <div id="result"></div>

    <script>
        const log = document.getElementById('log');
        const result = document.getElementById('result');
        
        function agregarLog(mensaje, tipo = 'info') {
            log.innerHTML += '<div class="' + tipo + '">' + mensaje + '</div>';
        }
        
        async function pruebaCompleta() {
            try {
                agregarLog('1. üîÑ Verificando TensorFlow.js...');
                if (typeof tf === 'undefined') {
                    throw new Error('TensorFlow.js no est√° cargado');
                }
                agregarLog('   ‚úÖ TensorFlow.js versi√≥n: ' + tf.version.tfjs, 'success');
                
                agregarLog('2. üîÑ Cargando modelo...');
                const modelo = await tf.loadLayersModel('modelo/model.json');
                agregarLog('   ‚úÖ Modelo cargado correctamente', 'success');
                
                agregarLog('3. üîÑ Verificando estructura del modelo...');
                agregarLog('   üìê Input shape: ' + modelo.inputs[0].shape, 'info');
                agregarLog('   üìê Output shape: ' + modelo.outputs[0].shape, 'info');
                agregarLog('   üîß N√∫mero de capas: ' + modelo.layers.length, 'info');
                
                agregarLog('4. üîÑ Probando predicci√≥n...');
                const testInput = tf.randomNormal([1, 224, 224, 3]);
                const prediccion = modelo.predict(testInput);
                const resultados = await prediccion.data();
                
                agregarLog('   ‚úÖ Predicci√≥n exitosa', 'success');
                agregarLog('   üìä Resultados: ' + Array.from(resultados).map(r => r.toFixed(4)).join(', '), 'info');
                
                // Limpiar
                testInput.dispose();
                prediccion.dispose();
                
                result.innerHTML = 
                    '<div class="success">üéâ ¬°PRUEBA EXITOSA! El modelo funciona correctamente.</div>' +
                    '<div class="info">' +
                    '<h3>üìã Informaci√≥n del Modelo:</h3>' +
                    '<p><strong>Input:</strong> ' + modelo.inputs[0].shape + '</p>' +
                    '<p><strong>Output:</strong> ' + modelo.outputs[0].shape + '</p>' +
                    '<p><strong>Capas:</strong> ' + modelo.layers.length + '</p>' +
                    '</div>';
                    
            } catch (error) {
                agregarLog('‚ùå ERROR: ' + error.message, 'error');
                result.innerHTML = 
                    '<div class="error">üí• Error en la prueba: ' + error.message + '</div>' +
                    '<p>Consulta la consola del navegador para m√°s detalles.</p>';
                console.error('Error detallado:', error);
            }
        }
        
        // Ejecutar prueba
        pruebaCompleta();
    </script>
</body>
</html>